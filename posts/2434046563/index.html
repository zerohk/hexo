<!DOCTYPE html><html class="hide-aside" lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>网络基础 | Buercheng's Space</title><meta name="keywords" content="java笔记,网络基础,JAVA SOCKET"><meta name="author" content="不二承"><meta name="copyright" content="不二承"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="网络（Networks）、包（Packets）和协议（Protocols）Network计算机网络由通过通信信道(communication channerls)**相互连接的机器组成。这些机器也叫作主机(hosts)或路由器(routers)**。  通信信道，在这里指将一系列字节从一个主机转移到另一个主机的一种工具。可以是有线的，比如以太网（Ethernet）；可以是无线的，比如WiFi；或者">
<meta property="og:type" content="article">
<meta property="og:title" content="网络基础">
<meta property="og:url" content="https://blog.buercheng.space/posts/2434046563/index.html">
<meta property="og:site_name" content="Buercheng&#39;s Space">
<meta property="og:description" content="网络（Networks）、包（Packets）和协议（Protocols）Network计算机网络由通过通信信道(communication channerls)**相互连接的机器组成。这些机器也叫作主机(hosts)或路由器(routers)**。  通信信道，在这里指将一系列字节从一个主机转移到另一个主机的一种工具。可以是有线的，比如以太网（Ethernet）；可以是无线的，比如WiFi；或者">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/Facebook_TCP_IP_V2.png">
<meta property="article:published_time" content="2020-10-28T17:11:17.000Z">
<meta property="article:modified_time" content="2020-10-28T17:26:25.913Z">
<meta property="article:author" content="不二承">
<meta property="article:tag" content="java笔记">
<meta property="article:tag" content="网络基础">
<meta property="article:tag" content="JAVA SOCKET">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/Facebook_TCP_IP_V2.png"><link rel="shortcut icon" href="/pics/icon.webp"><link rel="canonical" href="https://blog.buercheng.space/posts/2434046563/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 不二承","link":"链接: ","source":"来源: Buercheng's Space","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-10-29 01:26:25'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Buercheng's Space" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/pics/avatar.jpg" onerror="onerror=null;src='/img/404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-icons"></i><span> 影音书籍</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book-open"></i><span> 阅读</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-quote-right"></i><span> 碎碎念</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment-alt"></i><span> 说说</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/wireless_network.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Buercheng's Space</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-icons"></i><span> 影音书籍</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book-open"></i><span> 阅读</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-quote-right"></i><span> 碎碎念</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/shuoshuo"><i class="fa-fw fas fa-comment-alt"></i><span> 说说</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">网络基础<a class="post-edit-link" href="https://github.com/zerohk/hexo/edit/hexo/source/_posts/网络基础.md" rel="external nofollow noreferrer" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-10-28T17:11:17.000Z" title="发表于 2020-10-29 01:11:17">2020-10-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-10-28T17:26:25.913Z" title="更新于 2020-10-29 01:26:25">2020-10-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java-Web/">Java Web</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>10分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="网络（Networks）、包（Packets）和协议（Protocols）"><a href="#网络（Networks）、包（Packets）和协议（Protocols）" class="headerlink" title="网络（Networks）、包（Packets）和协议（Protocols）"></a>网络（Networks）、包（Packets）和协议（Protocols）</h1><h2 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h2><p>计算机网络由通过<strong>通信信道(communication channerls)**相互连接的机器组成。这些机器也叫作</strong>主机(hosts)<strong>或</strong>路由器(routers)**。</p>
<blockquote>
<p>通信信道，在这里指将一系列字节从一个主机转移到另一个主机的一种工具。可以是有线的，比如以太网（Ethernet）；可以是无线的，比如WiFi；或者是其他的连接方式。</p>
<p>主机是运行应用（诸如浏览器、QQ等应用）的计算机。运行在主机上的应用程序是该网络真正的“用户”</p>
<p>路由器是具有将<strong>信息（information）</strong>从一个通信信道<strong>转播（relay）或转发（forward）</strong>到另一个通信信道功能的机器。他们可能会运行程序，但通常不会运行应用程序。</p>
</blockquote>
<h2 id="Packet"><a href="#Packet" class="headerlink" title="Packet"></a>Packet</h2><p><strong>信息</strong>指的是被程序构造和解译的一系列字节。在计算机网络中，这些字节通常被称为<strong>包（packets)</strong> 。一个包包含能够用于完成计算机网络的任务的<strong>控制信息（control information）</strong>，有时还包含用户数据。比如，包含用于识别包需要到达的目的地的信息。路由器可以使用这些控制信息来找出怎样转发每一个包。</p>
<h2 id="Protocol"><a href="#Protocol" class="headerlink" title="Protocol"></a>Protocol</h2><p>协议是关于通信程序之间包交换以及包的含义的<strong>规则</strong>。协议指定了包的组成，（比如，目的地的信息在包中的位置以及大小）以及信息该如何被解译。</p>
<p>通常，不同的协议用来解决不同的问题。比如<strong>HTTP协议（HyperText Transfer Protocol超文本传输协议）</strong>是用来解决超文本对象的传输问题的。</p>
<h2 id="TCP-IP协议"><a href="#TCP-IP协议" class="headerlink" title="TCP/IP协议"></a>TCP/IP协议</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>实现一个有用的网络，需要解决大量不同的问题。为了让事情变得易于管理和模块化，需要设计不同的协议来解决一类的问题。TCP/IP就是这样一个解决集合（collection of solutions），有时也叫作协议套件（Protocol suite）。</p>
<p>此后，提及网络，都指的是使用TCP/IP协议套件的网络。</p>
<p>TCP/IP协议套件中最主要的协议是 Internet Protocol (IP), the Transmission Control Protocol (TCP，用户传输协议) , User Datagram Protocol (UDP，用户数据报协议)。</p>
<h3 id="分层"><a href="#分层" class="headerlink" title="分层"></a>分层</h3><p>TCP/IP和其他所有协议套件都被分<strong>层（layer</strong>）了。</p>
<p>如图，展示了在主机和路由器上，协议、应用程序以及Sockets API之间的关系，也展示了从一个应用程序（使用TCP）发送到另一个应用程序的数据的流向。应用程序通过SocketsAPI获得TCP和UDP提供的服务。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/image-20201028162116324.png" alt="A TCP/IP network"></p>
<p>在TCP/IP协议中，最底层是由底层通信信道组成的（比方说以太网或者是拨号上网调制解调器连接）。这些信道被上一层的<strong>网络层</strong>所使用，网络层主要解决的问题是将包转发到他们的目的地（也就是路由器的功能）；网络层主要的协议是IP协议，它使得两台主机之间就好像是单一的host-to-host信道，即使这两台主机之间存在许多的通信信道和路由器。</p>
<blockquote>
<p>IP协议提供了<strong>数据报datagram</strong>服务：每一个包都是被网络单独发送出去的，因此每一个IP包必须包含目的<strong>地址</strong>信息。IP协议是最有效协议：它尝试发送每一个包。但是在网络中传递的时候，也会偶尔丢包，重新排列包，或是复制包。</p>
</blockquote>
<p>网络层之上是<strong>传输层（transport layer）</strong>，该层有两种协议可以选择：TCP或是UDP。两者都建立在IP协议提供的服务上，但根据应用需求不同，可以选择不同的协议。两者有一个共同的功能：<strong>寻址addressing</strong>。IP发送包给主机，但在主机需要更细分，因为一个主机可能运行了多个应用程序，需要决定应该把包发送给哪一个应用程序。TCP和UDP使用的地址，称作<strong>端口号port numbers</strong>。TCP/IP叫作<strong>端到端传输协议（end-to-end transport protocols）</strong>，因为它们总是将数据从一个应用程序传递到另一个应用程序。</p>
<blockquote>
<p>TCP需要检测和恢复，可能在IP协议提供的host-to-host信道中出现的：丢包，复制包或是其他错误。TCP提供了一个<strong>可信字节流信道reliable byte-stream channel</strong>，因此应用程序就不需要去处理上述可能出现的错误。TCP是一个<strong>连接导向协议connection-oriented protocol</strong>：在使用该协议进行通信之前，两个程序之间首先要建立TCP连接，这其中还包含了两台通信的计算机之间进行的<strong>握手</strong>信息的交换。</p>
<ul>
<li><p>三次握手：TCP协议中，在发送数据的准备阶段，客户端与服务器之间的三次交互，以保证连接的可<br>  靠。</p>
<ul>
<li><p>第一次握手，客户端向服务器端发出连接请求，等待服务器确认。</p>
</li>
<li><p>第二次握手，服务器端向客户端回送一个响应，通知客户端收到了连接请求。</p>
</li>
<li><p>第三次握手，客户端再次向服务器端发送确认信息，确认连接。整个交互过程如下图所示。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/image-20201028171026514.png" alt="三次握手"></p>
<p>UDP则不检测IP阶段可能发生的错误，因此使用UDP协议的应用需要来检查和恢复出现的错误。</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h1><blockquote>
<p>When you mail a letter, you provide the address of the recipient in a form that the postal<br>service can understand. Before you can talk to someone on the phone, you must supply a<br>phone number to the telephone system. In a similar way, before a program can communicate<br>with another program, it must tell the network something to identify the other program. In<br>TCP/IP, it takes two pieces of information to identify a particular program: an <strong>Internet address</strong>,<br>used by IP, and a <strong>port number</strong>, the additional address interpreted by the transport protocol<br>(TCP or UDP).</p>
</blockquote>
<h2 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h2><p>网络地址是二进制数字。根据IP协议版本的不同，分为IPV4地址和IPV6地址。在技术上来说，每个网络地址指的是一个主机和底层通信信道之间的连接，即<strong>网络接口network interface</strong>。一个主机可能有多个接口。</p>
<p>每个版本的IP协议，定义了一些特殊用途的地址：</p>
<ul>
<li><strong>回送地址loopback address</strong>：通常分配了一个特定的<strong>回送接口loopback interface</strong>。一个虚拟的设备会将传送包发送回本地。主要用于网络软件测试以及本地机进程间通信，无论什么程序，一旦使用回送地址发送数据，协议软件立即返回之，不进行任何网络传输。</li>
<li>对于IPV4来说，还存在用于私有网络的保留地址。</li>
<li><strong>链路本地地址link-local</strong>：这样的地址只能用于连接同一网络的主机之间的通信，路由器不会转发它们。</li>
<li><strong>组播地址multicast address</strong>：一般的IP地址（称为<strong>单播地址unicast</strong>）只指向单一目的地，组播地址则指向多个目的地。</li>
</ul>
<h3 id="IPV4"><a href="#IPV4" class="headerlink" title="IPV4"></a>IPV4</h3><p>IPV4地址<strong>长32位（bits），4个字节（bytes）</strong>。IPV4地址可以使用<strong>点分法（dotted-quad）</strong>来书写，每一组数字代可以是十进制数字，代表一个字节，比如：<code>10.1.2.3</code>。每一位的取值范围是0-255。</p>
<p>IPV4的回送地址是<code>127.0.0.1</code>.严格来说任何127开头的地址都能回送。</p>
<p>IPV4用于私有网络的保留地址包括10开头和<code>192.168</code>开头的所有地址，以及172开头，第二位为16和31的所有地址。</p>
<p>IPV4的链路本地地址以<code>169.254</code>开头。</p>
<p>IPV4的组播地址包含从224开头的地址到239开头的地址。</p>
<h3 id="IPV6"><a href="#IPV6" class="headerlink" title="IPV6"></a>IPV6</h3><p>IPV6地址长<strong>128位（bits），16个字节（bytes）</strong>。IPV6地址使用十六进制数字来书写，每组数字代表2个字节，组与组之间用冒号隔开，比如<code>2000:fdb8:0000:0000:0001:00ab:853c:39a1</code>。前导0可以省略，比如：<code>2000:fdb8:0000:0000:1:ab:853c:39a1</code>。连续的只包含0的组可以一起省略（但只能省略一次），比如<code>2000:fdb8::1:00ab:853c:39a1</code>。</p>
<p>IPV6的回送地址是<code>0:0:0:0:0:0:0:1</code>,或者简写为<code>::1</code></p>
<p>IPV6的链路本地地址以<code>FE8</code>开头。</p>
<p>IPV6的组播地址以FF开头。</p>
<h2 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h2><p>TCP或是UDP的端口号通常跟一个地址相关联。</p>
<blockquote>
<p>The postal service uses the street address to get the<br>letter to a mailbox; whoever empties the mailbox is then responsible for getting the letter to the<br>proper room within the building. Or consider a company with an internal telephone system:<br>to speak to an individual in the company, you first dial the company’s main phone number to<br>connect to the internal telephone system and then dial the extension of the particular telephone<br>of the individual you wish to speak with.</p>
<p><strong>the Internet address is the street address or the company’s main number, whereas the port corresponds to the room number or telephone extension.</strong></p>
</blockquote>
<p>端口号是16位的无符号二进制数字，其范围是1-65535（0号端口被保留）。</p>
<h1 id="名称"><a href="#名称" class="headerlink" title="名称"></a>名称</h1><p>我们已经习惯将一个名称（比如<code>host.example.com</code>）指向相应的主机。但是IP协议处理的是地址（二进制数字），而不是名称。</p>
<p>我们需要使用**域名系统Domain Name System (DNS)**和本地配置的数据库，来将域名和IP地址联系起来。</p>
<h1 id="服务端-amp-客户端"><a href="#服务端-amp-客户端" class="headerlink" title="服务端&amp;客户端"></a>服务端&amp;客户端</h1><p>客户端程序初始化通信，服务端程序被动的等待并且回复与它进行通信的客户端程序。服务端和客户端组成了应用。</p>
<p>一个程序是作为客户端还是服务端，决定了其使用sockets API来与其对等方（peer）进行通信的一般形式。（客户端是服务端的对等方，反之亦然）。因此，辨别服务端和客户端就很重要了，因为，客户端需要知道服务端的地址和端口号以便初始化通信。但是反过来不成立，因为通过sockets API，服务端在接收到客户端的初始化通信时便能够获取到客户端的地址信息</p>
<blockquote>
<p>in order to<br>be called, a person does not need to know the telephone number of the caller. As with a<br>telephone call, once the connection is established, the distinction between server and client<br>disappears.</p>
</blockquote>
<p>那么客户端又怎么能知道服务端的IP地址和端口号呢？通常，客户端知道他想要进行通信的服务端的名字即可。比方说，通过**统一资源定位符Universal Resource Locator (URL)**，诸如<code>https://www.baidu.com</code>此形式，然后再通过DNS即可知道相应的服务端的IP地址。</p>
<p>想要知道服务端的端口有点不同。理论上，服务端会使用任意的端口号，但是客户端又必须找到他。对一些特定的服务，规定了一些特定的端口号。比如，端口号21分配给了**文件传输协议File Transfer Protocol (FTP)**。</p>
<h1 id="什么是Socket"><a href="#什么是Socket" class="headerlink" title="什么是Socket"></a>什么是Socket</h1><blockquote>
<p>A socket is an abstraction through which an application may send and receive data，A socket allows an application to plug in to the network and communicate with other applications that are plugged in to the same network. Information written to the socket by an application on one machine can be read by an application on a different machine and vice<br>versa.</p>
</blockquote>
<p>不同类型的套接字与不同类型的协议套件以及协议套件中的不同协议栈相关联。</p>
<p>TCP/IP中主要的套接字类型是<code>stream sockets</code> 和 <code>datagram sockets</code>。<code>stream sockets</code>使用TCP作为端到端协议（底层通过IP协议），因此提供了一个可信赖的字节流（byte-stream）服务。一个TCP/IP <code>stream socket</code>代表了TCP连接的一端。<code>datagram sockets</code>使用的是UDP协议（底层通过IP协议），因此提供了一个最优数据报服务（best-effort datagram service），使得应用可以单次发送大约65500字节的信息。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/image-20201029010632768.png" alt="Sockets, protocols, and ports"></p>
<blockquote>
<p>Figure 1.2 depicts the logical relationships among applications, socket abstractions,<br>protocols, and port numbers within a single host. Note that a single socket abstraction can<br>be referenced by multiple application programs. Each program that has a reference to a particular socket can communicate through that socket. Earlier we said that a port identifies an<br>application on a host. Actually, a port identifies a socket on a host. From Figure 1.2, we see<br>that multiple programs on a host can access the same socket. In practice, separate programs<br>that access the same socket would usually belong to the same application (e.g., multiple copies<br>of a Web server program), although in principle they could belong to different applications.</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">不二承</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.buercheng.space/posts/2434046563/">https://blog.buercheng.space/posts/2434046563/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.buercheng.space" target="_blank">Buercheng's Space</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java%E7%AC%94%E8%AE%B0/">java笔记</a><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/">网络基础</a><a class="post-meta__tags" href="/tags/JAVA-SOCKET/">JAVA SOCKET</a></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_facebook_messenger"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.addtoany.com/share"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/4210682641/"><img class="prev-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/java-socket-programming.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">基础套接字</div></div></a></div><div class="next-post pull-right"><a href="/posts/21945543/"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/why-im-glad-i-didnt-have-kids-stephanie-zacharek.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">那些年，拼出来的屌丝生活</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/4210682641/" title="基础套接字"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/java-socket-programming.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-31</div><div class="title">基础套接字</div></div></a></div><div><a href="/posts/1692463639/" title="TCP套接字"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/Id_1f0835cb-f3a7-4c80-8670-8889b0599d4d.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-08</div><div class="title">TCP套接字</div></div></a></div><div><a href="/posts/3150929911/" title="Lambda表达式"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/Lambda_expression_top.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-14</div><div class="title">Lambda表达式</div></div></a></div><div><a href="/posts/2640443603/" title="MySQL基础知识"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/2640443603_cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-12</div><div class="title">MySQL基础知识</div></div></a></div><div><a href="/posts/2215875518/" title="数据库设计"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/2215875518_top.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-12</div><div class="title">数据库设计</div></div></a></div><div><a href="/posts/3742615103/" title="Java常用类"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@pics/img/class_cover.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-04</div><div class="title">Java常用类</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%EF%BC%88Networks%EF%BC%89%E3%80%81%E5%8C%85%EF%BC%88Packets%EF%BC%89%E5%92%8C%E5%8D%8F%E8%AE%AE%EF%BC%88Protocols%EF%BC%89"><span class="toc-text">网络（Networks）、包（Packets）和协议（Protocols）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Network"><span class="toc-text">Network</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Packet"><span class="toc-text">Packet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Protocol"><span class="toc-text">Protocol</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP-IP%E5%8D%8F%E8%AE%AE"><span class="toc-text">TCP&#x2F;IP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-text">概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B1%82"><span class="toc-text">分层</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80"><span class="toc-text">地址</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#IP"><span class="toc-text">IP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IPV4"><span class="toc-text">IPV4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPV6"><span class="toc-text">IPV6</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-text">端口号</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8D%E7%A7%B0"><span class="toc-text">名称</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF-amp-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">服务端&amp;客户端</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFSocket"><span class="toc-text">什么是Socket</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 不二承</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'V0ws0os2dGf5MuwX3dnxn0IB-MdYXbMMI',
      appKey: 'yMIP1AgsfA4VRG8nUjjUjj24',
      placeholder: '快来留下你的评论吧，小哥哥，小姐姐~',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: true,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign(initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk({
      clientID: 'fc98ddf96f1da7dce9f9',
      clientSecret: '71cb4c942162e395a3d634f68c7a812da89838e8',
      repo: 'blog_comment',
      owner: 'zerohk',
      admin: ['zerohk'],
      id: 'a72fd266dc615455e5d24afb82315378',
      language: 'zh-CN',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: true,
      updateCountCallback: commentCount
    })
    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Valine' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>