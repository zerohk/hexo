<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>MySQL基础知识</title>
      <link href="posts/2640443603/"/>
      <url>posts/2640443603/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库的安装、卸载"><a href="#数据库的安装、卸载" class="headerlink" title="数据库的安装、卸载"></a>数据库的安装、卸载</h1><h1 id="数据库的启动与登录"><a href="#数据库的启动与登录" class="headerlink" title="数据库的启动与登录"></a>数据库的启动与登录</h1><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><h3 id="通过服务启动MySQL服务。"><a href="#通过服务启动MySQL服务。" class="headerlink" title="通过服务启动MySQL服务。"></a>通过服务启动MySQL服务。</h3><p>1、可以通过右键计算机—&gt;管理—&gt;服务和应用程序—&gt;服务，找到MySQL服务启动。</p><p>2、可以通过win+R，输入services.msc快捷进入服务页面。</p><p>可以将MySQL服务设置为自动启动，就不再需要手动开启了。</p><h3 id="通过控制台启动MySQL服务"><a href="#通过控制台启动MySQL服务" class="headerlink" title="通过控制台启动MySQL服务"></a>通过控制台启动MySQL服务</h3><p>以管理员模式打开控制台。</p><p><code>net start mysql</code>:启动MySQL服务。</p><p><code>net stop mysql</code>:关闭MySQL服务。</p><h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><h3 id="本地数据库登录"><a href="#本地数据库登录" class="headerlink" title="本地数据库登录"></a>本地数据库登录</h3><p>1、<code>mysql -u用户名 -p密码</code></p><p>2、<code>mysql -u用户名 -p</code>:回车后要求输入密码</p><h3 id="远程数据库登录"><a href="#远程数据库登录" class="headerlink" title="远程数据库登录"></a>远程数据库登录</h3><p>1、<code>mysql -h远程数据库地址 -u用户名 -p密码 </code></p><p>2、<code>mysql -h远程数据库地址 -u用户名 -p</code></p><p>3、<code>mysql --host=远程数据库地址 --user=用户名 --password=密码</code></p><p>4、<code>mysql --host=远程数据库地址 --user=用户名 --password</code></p><h1 id="数据库的目录结构"><a href="#数据库的目录结构" class="headerlink" title="数据库的目录结构"></a>数据库的目录结构</h1><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200921211212387.png" alt="image-20200921211212387"></p><p><code>bin</code>：执行文件</p><p><code>data</code>：用于放置一些日志文件以及数据库</p><p><code>include</code>：用于放置一些头文件</p><p><code>lib</code>:用于放置一系列库文件</p><p><code>share</code>:用于存放字符集、语言等信息</p><p><code>my.ini</code>:配置文件</p><h1 id="SQL语言"><a href="#SQL语言" class="headerlink" title="SQL语言"></a>SQL语言</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>Structured Query Language：结构化查询语言<br>    其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。</p><h2 id="通用语法"><a href="#通用语法" class="headerlink" title="通用语法"></a>通用语法</h2><ol><li><p>SQL 语句可以单行或多行书写，以分号结尾。</p></li><li><p>可使用空格和缩进来增强语句的可读性。</p></li><li><p>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</p></li><li><p>3 种注释</p><ul><li>单行注释: – 注释内容（注意–后面的空格） 或 # 注释内容(mysql 特有) </li><li>多行注释: /* 注释 */（与java多行注释相似）</li></ul></li></ol><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><ol><li>DDL(Data Definition Language)数据定义语言<pre><code> 用来定义数据库对象：**数据库，表，列**等。关键字：create, drop,alter 等</code></pre></li><li>DML(Data Manipulation Language)数据操作语言<pre><code> 用来对数据库中表的**数据**进行**增删改**。关键字：insert, delete, update 等</code></pre></li><li>DQL(Data Query Language)数据查询语言<pre><code> 用来**查询**数据库中表的**记录(数据)**。关键字：select, where 等</code></pre></li><li>DCL(Data Control Language)数据控制语言(了解)<pre><code> 用来定义数据库的**访问权限和安全级别，及创建用户**。关键字：GRANT， REVOKE 等</code></pre></li></ol><h1 id="DDL：操作数据库、表"><a href="#DDL：操作数据库、表" class="headerlink" title="DDL：操作数据库、表"></a>DDL：操作数据库、表</h1><h2 id="操作数据库："><a href="#操作数据库：" class="headerlink" title="操作数据库："></a>操作数据库：</h2><h3 id="CRUD语句"><a href="#CRUD语句" class="headerlink" title="CRUD语句"></a>CRUD语句</h3><p>CRUD定义：</p><ul><li>C(Create):创建</li><li>R(Retrieve)：查询</li><li>U(Update):修改</li><li>D(Delete):删除</li></ul><hr><h4 id="Create语句："><a href="#Create语句：" class="headerlink" title="Create语句："></a>Create语句：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database 数据库名;    -- 创建数据库</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922003534168.png" alt="image-20200922003534168"></p><p>新创建的数据库与已知数据库重名时：</p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922003651221.png" alt="image-20200922003651221"></p><p>可以使用以下语句避免错误出现：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database if not exists  数据库名;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922004033053.png" alt="image-20200922004033053"></p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922004149497.png" alt="image-20200922004149497"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database 数据库名 character set 字符集名称;    -- 创建数据库并指定字符集</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922004608579.png" alt="image-20200922004608579"></p><p>创建数据库db4，判断是否重名，并指定字符集为gbk:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database if not exists db4 character set gbk;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922004943303.png" alt="image-20200922004943303"></p><h4 id="Retrieve语句："><a href="#Retrieve语句：" class="headerlink" title="Retrieve语句："></a>Retrieve语句：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;     -- 查询所有已创建的数据库</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922001542219.png" alt="image-20200922001542219"></p><blockquote><p>在MySQL数据库的数据目录下（win7：<code>C:\ProgramData\MySQL\MySQL Server 5.5\data</code>）有三个文件夹，就是MySQL自带的数据库。</p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922001933690.png" alt="image-20200922001933690"></p><p>**<code>information_schema</code>**：视图，并不是真正的数据库。它提供了访问数据库元数据的方式。没有在data目录下。</p><p><strong><code>mysql库</code>**：这个是mysql的核心数据库，主要负责存储数据库的用户、权限设置、关键字等mysql自己需要使用的控制和管理信息。</strong>不可以删除**。</p><p><strong><code>performance_schema</code>**：对性能提升进行操作的数据库。</strong>尽量别动**</p><p><strong><code>test</code></strong>:测试数据库。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create database 数据库名;    -- 查看某个数据库字符集的名称（安装时默认utf-8)、查看某个数据库的创建语句</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922003250158.png" alt="image-20200922003250158"></p><h4 id="Update语句："><a href="#Update语句：" class="headerlink" title="Update语句："></a>Update语句：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter database 数据库名 character set 字符集;    -- 更改指定数据库的字符集</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922005857294.png" alt="image-20200922005857294"></p><h4 id="Delete语句："><a href="#Delete语句：" class="headerlink" title="Delete语句："></a>Delete语句：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database 数据库名;    -- 删除指定数据库，删除不存在的数据库会报错</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922010138546.png" alt="image-20200922010138546"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database if exists 数据库名;    -- 如果存在则删除</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922010340797.png" alt="image-20200922010340797"></p><h3 id="使用数据库的语句"><a href="#使用数据库的语句" class="headerlink" title="使用数据库的语句"></a>使用数据库的语句</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database();     -- 查询当前使用的数据库</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922010702349.png" alt="image-20200922010702349"></p><p>返回NULL，当前未使用任何数据库；</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 数据库名称;    -- 使用指定数据库</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922010821110.png" alt="image-20200922010821110"></p><h2 id="操作数据库的表："><a href="#操作数据库的表：" class="headerlink" title="操作数据库的表："></a>操作数据库的表：</h2><h3 id="Create："><a href="#Create：" class="headerlink" title="Create："></a>Create：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create 表名(</span><br><span class="line">列名1 数据类型1,</span><br><span class="line">列名2 数据类型2,</span><br><span class="line">...</span><br><span class="line">列名n 数据类型n</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><h4 id="MySQL常见数据类型："><a href="#MySQL常见数据类型：" class="headerlink" title="MySQL常见数据类型："></a>MySQL常见数据类型：</h4><ul><li>int：整数类型    <code>age int,</code></li><li>double:小数类型   <code>score  double(int digits1，int digits2),</code>digits1：位数，digits2：保留小数点后位数</li><li>date:日期，只包含年月日，格式：<code>yyyy-MM-dd</code></li><li>datetime:日期，包含年月日时分秒，格式：<code>yyyy-MM-dd HH:mm:ss</code></li><li>timestamp:时间戳日期，包含年月日时分秒，不赋值或赋值为NULL时，自动为其赋值为当前系统时间。</li><li>varchar:字符串，<code>name varchar(int length)</code>length:最多能容纳的字符数。name  varchar(20)名字最多容纳20个字符张三：两个字符——zhangsan：八个字符</li></ul></blockquote><p>在数据库db1中创建一个学生表：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table Student(</span><br><span class="line">id int, -- 编号</span><br><span class="line">name varchar(20), -- 名字</span><br><span class="line">age int,  -- 年龄</span><br><span class="line">birthday date,   -- 出生日期</span><br><span class="line">score double(4,1),   -- 分数</span><br><span class="line">createTime timestamp  -- 创建时间</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>​        <img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922022121545.png" alt="image-20200922022121545"></p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922022147065.png" alt="image-20200922022147065"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table 新的表名 like 已存在的表名;  -- 复制表</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922022528398.png" alt="image-20200922022528398"></p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922022609381.png" alt="image-20200922022609381"></p><h3 id="Retrieve："><a href="#Retrieve：" class="headerlink" title="Retrieve："></a>Retrieve：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;    -- 查询正在使用的数据库中的所有表</span><br></pre></td></tr></table></figure><p>用use命令切换到mysql：</p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922011712171.png" alt="image-20200922011712171"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc 表名称;   -- desc:description ,查询表结构</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922011913444.png" alt="image-20200922011913444"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table 表名;   -- 展示表的字符集</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922023238467.png" alt="image-20200922023238467"></p><h3 id="Update："><a href="#Update：" class="headerlink" title="Update："></a>Update：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 rename to 新的表名;    -- 修改表名</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922023028607.png" alt="image-20200922023028607"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 character set 字符集名;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922023457614.png" alt="image-20200922023457614"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add 列名 数据类型;  -- 给表添加一列</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922023844489.png" alt="image-20200922023844489"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 change 列名 新的列名 新的数据类型; -- 修改表的列名及数据类型</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922024110363.png" alt="image-20200922024110363"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 modify 列名 新数据类型;  -- 修改列的数据类型</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922024259774.png" alt="image-20200922024259774"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 drop 列名;   -- 删除列</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922024440724.png" alt="image-20200922024440724"></p><h3 id="Delete："><a href="#Delete：" class="headerlink" title="Delete："></a>Delete：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table 表名;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists 表名;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922022657901.png" alt="image-20200922022657901"></p><h1 id="DML-操作数据库中表的记录"><a href="#DML-操作数据库中表的记录" class="headerlink" title="DML:操作数据库中表的记录"></a>DML:操作数据库中表的记录</h1><p>重点掌握。包括添加数据，删除数据，修改数据。</p><h2 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名(列名1,列名2,...,列名n) values(值1,值2,...,值n);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922160000237.png" alt="image-20200922160000237"></p><p>查询表中记录(DQL语句):</p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922160545422.png" alt="image-20200922160545422"></p><p>注意事项：</p><p>1、列名和值要一 一对应（数据类型和个数都要一致）；</p><p>2、如果表名后不定义列名，则默认给所有列添加值（不想添加值的value可以用NULL表示）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名 values(值1,值2,...,值n);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922161232693.png" alt="image-20200922161232693"></p><p>3、除了数字，其他类型都需要用引号（单双引号皆可）括起来。</p><h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete form 表名 [where 条件];    -- []中是可选的</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922162308779.png" alt="image-20200922162308779"></p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922162401069.png" alt="image-20200922162401069"></p><p>不加条件时，默认删除表中所有记录。不推荐使用，因为表中有多少条记录，就会执行多少次删除操作，效率较低。</p><p>推荐使用以下语句，删除全部记录，效率比较高：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate table 表名;    -- 先删除表，再创建一个一模一样的表</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922162737278.png" alt="image-20200922162737278"></p><h2 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update 表名 set 列名1&#x3D;值1,列名2&#x3D;值2,...[where 条件];</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922164110490.png" alt="image-20200922164110490"></p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922164237142.png" alt="image-20200922164237142"></p><p>如果不加任何条件，则会将表中所有记录全部修改。</p><h1 id="DQL：数据查询"><a href="#DQL：数据查询" class="headerlink" title="DQL：数据查询"></a>DQL：数据查询</h1><p>最重要的内容。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">字段列表</span><br><span class="line">from</span><br><span class="line">表名列表</span><br><span class="line">where</span><br><span class="line">条件列表</span><br><span class="line">group by</span><br><span class="line">分组字段</span><br><span class="line">having</span><br><span class="line">分组之后的条件</span><br><span class="line">order by</span><br><span class="line">按【】排序</span><br><span class="line">limit</span><br><span class="line">分页限定</span><br></pre></td></tr></table></figure><h2 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名;  -- 查询表中所有记录</span><br></pre></td></tr></table></figure><h3 id="多字段查询"><a href="#多字段查询" class="headerlink" title="多字段查询"></a>多字段查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 列名1,列名2,... from 表名; -- 多字段查询</span><br></pre></td></tr></table></figure><h4 id="代码演示："><a href="#代码演示：" class="headerlink" title="代码演示："></a>代码演示：</h4><p>1.创建一个表student：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE student( </span><br><span class="line">id int, -- 编号 </span><br><span class="line">name varchar(20), -- 姓名 </span><br><span class="line">age int, -- 年龄 </span><br><span class="line">sex varchar(5), -- 性别 </span><br><span class="line">address varchar(100), -- 地址 </span><br><span class="line">math int, -- 数学 </span><br><span class="line">english int -- 英语 </span><br><span class="line">); </span><br><span class="line">INSERT INTO </span><br><span class="line">student(id,NAME,age,sex,address,math,english) </span><br><span class="line">VALUES </span><br><span class="line">(1,&#39;马云&#39;,55,&#39;男&#39;,&#39;杭州&#39;,66,78),</span><br><span class="line">(2,&#39;马化腾&#39;,45,&#39;女&#39;,&#39;深圳&#39;,98,87),</span><br><span class="line">(3,&#39;马景涛&#39;,55,&#39;男&#39;,&#39;香港&#39;,56,77),</span><br><span class="line">(4,&#39;柳岩&#39;,20,&#39;女&#39;,&#39;湖南&#39;,76,65),</span><br><span class="line">(5,&#39;柳青&#39;,20,&#39;男&#39;,&#39;湖南&#39;,86,NULL),</span><br><span class="line">(6,&#39;刘德华&#39;,57,&#39;男&#39;,&#39;香港&#39;,99,99),</span><br><span class="line">(7,&#39;马德&#39;,22,&#39;女&#39;,&#39;香港&#39;,99,99),</span><br><span class="line">(8,&#39;德玛西亚&#39;,18,&#39;男&#39;,&#39;南京&#39;,56,65);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922173407504.png" alt="image-20200922173407504"></p><p>2.从student表中查询姓名，math，和English</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,math,english from student;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922173618963.png" alt="image-20200922173618963"></p><h3 id="去重查询"><a href="#去重查询" class="headerlink" title="去重查询"></a>去重查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select address from student;</span><br></pre></td></tr></table></figure><p>使用该语句查询时，会出现重复的项目：</p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922173926807.png" alt="image-20200922173926807"></p><p>可以使用关键字 <code>distinct</code>去重查询：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct address from student;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922174106138.png" alt="image-20200922174106138"></p><p>只有查询出的结果完全一致时才会去重，比如以下代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct name,address from student;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922174229579.png" alt="image-20200922174229579"></p><p>因为姓名有一致的，即使地址重复了，且使用了地distinct关键字也不会将重复地址筛选掉。</p><h3 id="计算列"><a href="#计算列" class="headerlink" title="计算列"></a>计算列</h3><p> 一般可以使用四则运算计算一些列的值。（一般只会进行数值型的计算）</p><h4 id="代码演示"><a href="#代码演示" class="headerlink" title="代码演示"></a>代码演示</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,math,english,math+english from student; -- 查询名字，数学成绩，英语成绩并计算总成绩</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922174559726.png" alt="image-20200922174559726"></p><h4 id="ifnull-exp1-exp2-函数"><a href="#ifnull-exp1-exp2-函数" class="headerlink" title="ifnull(exp1,exp2)函数"></a>ifnull(exp1,exp2)函数</h4><p>从上述操作中可以发现，当查询的值中存在NULL时，进行四则运算后得到的值也会是NULL。为了避免出现这种问题，我们可以使用<code>ifnull</code>函数来进行处理。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifnull(exp1,exp2)   -- exp1表示可能为null的值，exp2表示将NULL替换掉的值</span><br></pre></td></tr></table></figure><p>因此上述计算总分的查询语句可以改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,math,english,math+ifnull(english,0) from student; -- 为NULL时就将值用0替换</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922175500877.png" alt="image-20200922175500877"></p><h3 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h3><p>从上述查询我们发现列<code>math+ifnull(english,0)</code>在结果中不好看，所以我们可以对其设置别名，当然任意列都可以设置别名。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">列名 as 别名 -- 使用关键字as对列名设置别名</span><br></pre></td></tr></table></figure><h4 id="代码演示-1"><a href="#代码演示-1" class="headerlink" title="代码演示"></a>代码演示</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,math,english,math+ifnull(english,0) as 总分 from student;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922180001216.png" alt="image-20200922180001216"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name as 姓名,math as 数学,english as 英语,math+ifnull(english,0) as 总分 from student;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922180146752.png" alt="image-20200922180146752"></p><h4 id="起别名简化形式"><a href="#起别名简化形式" class="headerlink" title="起别名简化形式"></a>起别名简化形式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 列名1 别名1,列名2 别名2,... from 表名;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name,math 数学,english 英语,math+ifnull(english,0) 总分 from student;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922180414253.png" alt="image-20200922180414253"></p><h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><p>where子句后加条件。</p><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><table><thead><tr><th>比较运算符</th><th>备注</th></tr></thead><tbody><tr><td>&gt;、&lt;、=、&gt;=、&lt;=、&lt;&gt;</td><td>&lt;&gt;在SQL中表示不等于，在mysql中也可以使用!=没有==</td></tr><tr><td>BETWEEN…AND…</td><td>在一个范围之内，包头又包尾</td></tr><tr><td>IN(集合)</td><td>集合表示多个值，各个值之间用逗号隔开</td></tr><tr><td>LIKE ‘张%’</td><td>模糊查询</td></tr><tr><td>IS [NOT] NULL</td><td>查询某一列为[NOT]NULL的值，注：不能写=NULL(!=NULL)</td></tr></tbody></table><table><thead><tr><th>逻辑运算符</th><th>备注</th></tr></thead><tbody><tr><td>&amp;&amp;或 AND</td><td>与，SQL中建议使用AND，&amp;&amp;并不通用。</td></tr><tr><td>|| 或 OR</td><td>或，SQL中建议使用OR，||并不通用。</td></tr><tr><td>! 或 NOT</td><td>非，SQL中建议使用NOT，!并不通用。</td></tr></tbody></table><h3 id="代码演示-2"><a href="#代码演示-2" class="headerlink" title="代码演示"></a>代码演示</h3><p>1.查询math大于80的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where math &gt; 80;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922222724078.png" alt="image-20200922222724078"></p><p>查询English小于90的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where english &lt; 90;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922222757117.png" alt="image-20200922222757117"></p><p>查询sex等于女的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where sex &#x3D; &#39;女&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922222936439.png" alt="image-20200922222936439"></p><p>2、查询年龄位于18-30（包含两头）之间的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 以下查询效果一致</span><br><span class="line">select * from student where age &gt;&#x3D; 18 &amp;&amp; age &lt;&#x3D; 30;</span><br><span class="line">select * from student where age &gt;&#x3D; 18 AND age &lt;&#x3D; 30; -- 推荐使用AND,不推荐&amp;&amp;</span><br><span class="line">select * from student where age BETWEEN 18 AND 30;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922223444233.png" alt="image-20200922223444233"></p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922223514518.png" alt="image-20200922223514518"></p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922223625776.png" alt="image-20200922223625776"></p><p>3.查询英语成绩为空的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where english IS NULL;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922223931763.png" alt="image-20200922223931763"></p><p>4.查询英语成绩不为空的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where english IS NOT NULL;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922224126958.png" alt="image-20200922224126958"></p><p>5.查询年龄为18，22，50的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 以下查询结果一致</span><br><span class="line">select * from student where age IN(18,22,50);</span><br><span class="line">select * from student where age &#x3D; 18 OR age &#x3D; 22 OR age &#x3D; 50;-- 推荐使用OR，不推荐||</span><br><span class="line">select * from student where age &#x3D; 18 || age &#x3D; 22 || age &#x3D; 50;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922224250640.png" alt="image-20200922224250640"></p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922224557584.png" alt="image-20200922224557584"></p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922224637532.png" alt="image-20200922224637532"></p><h3 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h3><p>MySQL通配符：_:匹配单个任意字符；%:匹配任意多个字符。</p><p>查询姓马的有哪些人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where name LIKE &#39;马%&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922230728661.png" alt="image-20200922230728661"></p><p>查询姓名第二个字为化的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where name LIKE &#39;_化%&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922230954627.png" alt="image-20200922230954627"></p><p>查询名字包含德字的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where name LIKE &#39;%德%&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922231144759.png" alt="image-20200922231144759"></p><p>查询名字是三个字的人</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where name LIKE &#39;___&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200922231318145.png" alt="image-20200922231318145"></p><h1 id="表的约束"><a href="#表的约束" class="headerlink" title="表的约束"></a>表的约束</h1><h2 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h2><p>涉及多张表的操作。</p><p>数据有冗余的时候，进行表的拆分，然后利用外键对拆分的表进行关联。</p><h3 id="添加外键"><a href="#添加外键" class="headerlink" title="添加外键"></a>添加外键</h3><p>1.在创建表时添加外键约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">...</span><br><span class="line">    外键列：外键列名称 数据类型,</span><br><span class="line">    constraint 外键名称 foreign key (外键列名称) references 主键表名(主键列名称),</span><br><span class="line">    ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>其中，外键名称可以任意取，主键表名，即为关联的表名。</p><p>2.在表创建完成之后添加外键</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add constraint 外键名 foreign key(外键列名) references 主表名(主键列名);</span><br></pre></td></tr></table></figure><h4 id="代码演示-3"><a href="#代码演示-3" class="headerlink" title="代码演示"></a>代码演示</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 创建一个部门表，作为主表，因为副表需要引用他，所以需要先创建</span><br><span class="line">CREATE TABLE department(</span><br><span class="line">dep_id INT INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">dep VARCHAR(20),</span><br><span class="line">dep_loacation VARCHAR(20)</span><br><span class="line">);</span><br><span class="line">-- 向表中添加两个部门</span><br><span class="line">INSERT INTO department VALUES(NULL, &#39;研发部&#39;,&#39;广州&#39;),(NULL, &#39;销售部&#39;, &#39;深圳&#39;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200926164650983.png" alt="image-20200926164650983"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- 创建员工表，利用外键和部门表产生关联</span><br><span class="line">CREATE TABLE employee(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">NAME VARCHAR(20),</span><br><span class="line">age INT,</span><br><span class="line">dep_id INT,  -- 外键列，与主表主键列类型要一致</span><br><span class="line">CONSTRAINT emp_dep_id FOREIGN KEY(dep_id) REFERENCES department(dep_id)</span><br><span class="line">);</span><br><span class="line">-- 添加员工信息</span><br><span class="line">INSERT INTO employee (NAME, age, dep_id) VALUES </span><br><span class="line">(&#39;张三&#39;, 20, 1),</span><br><span class="line">(&#39;李四&#39;, 21, 1),</span><br><span class="line">(&#39;王五&#39;, 20, 1),</span><br><span class="line">(&#39;老王&#39;, 20, 2),</span><br><span class="line">(&#39;大王&#39;, 22, 2),</span><br><span class="line">(&#39;小王&#39;, 18, 2);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200926165713224.png" alt="image-20200926165713224"></p><p>添加约束后，主键的列不能被删除，因为和从表产生了关联</p><p><img src="https://cdn.jsdelivr.net/gh/bu2cheng/picpic@master/blogimg/image-20200926165821510.png" alt="image-20200926165821510"></p><h3 id="删除外键"><a href="#删除外键" class="headerlink" title="删除外键"></a>删除外键</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 drop foreign key 外键名称;</span><br></pre></td></tr></table></figure><h2 id="级联操作"><a href="#级联操作" class="headerlink" title="级联操作"></a>级联操作</h2><p>添加级联操作时需要谨慎对待。在添加外键约束的语句中添加相应的语法，以便主表改变时，从表发生相应变化。级联操作有两种：级联更新和级联删除。级联更新：主表的主键发生变化时，从表的外键也会发生相应变化。级联删除：主表删除主键列的数据时，相应的从表的外键列会被全部删除。因此添加级联操作时要慎之又慎。</p><h3 id="级联更新"><a href="#级联更新" class="headerlink" title="级联更新"></a>级联更新</h3><p>在添加外键约束的语句中添加相应的语法。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">on update cascade</span><br></pre></td></tr></table></figure><p>1.创建表时添加级联更新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">...</span><br><span class="line">    外键列：外键列名 数据类型,</span><br><span class="line">    constraint 外键名称 foreign key(外键列名) references 主表名(主键名) on update cascade,</span><br><span class="line">    ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>2.创建完表后添加级联更新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add constraint 外键名称 foreign key(外键列名) refereces 主表名(主键列名) on update cascade;</span><br></pre></td></tr></table></figure><p>3.删除级联更新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 drop foreign key  外键名称;</span><br></pre></td></tr></table></figure><h3 id="级联删除"><a href="#级联删除" class="headerlink" title="级联删除"></a>级联删除</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">on delete cascade</span><br></pre></td></tr></table></figure><p>1.创建表时添加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">...</span><br><span class="line">    外键列：外键列名 数据类型,</span><br><span class="line">    constraint 外键名称 foreign key(外键列名) references 主表名(主键名) on delete cascade,</span><br><span class="line">    ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>2.创建完表后添加级联更新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add constraint 外键名称 foreign key(外键列名) refereces 主表名(主键列名) on delete cascade;</span><br></pre></td></tr></table></figure><p>3.删除级联更新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 drop foreign key  外键名称;</span><br></pre></td></tr></table></figure><h3 id="同时添加两种级联操作"><a href="#同时添加两种级联操作" class="headerlink" title="同时添加两种级联操作"></a>同时添加两种级联操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">...</span><br><span class="line">    外键列：外键列名 数据类型,</span><br><span class="line">    constraint 外键名称 foreign key(外键列名) references 主表名(主键名)on update cascade on delete cascade,</span><br><span class="line">    ...</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> java基础 </tag>
            
            <tag> 数据库基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于github图床搭建问题</title>
      <link href="posts/1800832272/"/>
      <url>posts/1800832272/</url>
      
        <content type="html"><![CDATA[<p>按照网上的教程，使用github+PicGo+jsDelivr的方式搭建免费图床，配置如下，</p><p><img src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@main/%E5%85%B3%E4%BA%8Egithub%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA%E9%97%AE%E9%A2%981.png"></p><p>一直显示服务端出错，请重试。</p><p><img src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@main/%E5%85%B3%E4%BA%8Egithub%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA%E9%97%AE%E9%A2%982.png" alt="image-20201008184820098"></p><p>按照网上的教程，改了又改，怎么都不能上传成功。最后去github看，主分支变成了<code>main</code>，而不再是<code>master</code>。于是把配置中的分支改为了<code>main</code></p><p><img src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@main/%E5%85%B3%E4%BA%8Egithub%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA%E9%97%AE%E9%A2%983.png"></p><p>测试了一下，上传成功！</p><p><img src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@main/%E5%85%B3%E4%BA%8Egithub%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA%E9%97%AE%E9%A2%984.png" alt="image-20201008190221582"></p><p>查了一下原因，原来是BLM的原因，说来实在可笑！</p><p><img src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@main/%E5%85%B3%E4%BA%8Egithub%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA%E9%97%AE%E9%A2%985.png"></p><p>这个问题解决了，新的问题随之产生了！发现从picgo自动生成的链接导入typora后，图片加载不出来。直接使用浏览器访问时，出现如下问题：</p><p><img src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@main/%E5%85%B3%E4%BA%8Egithub%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA%E9%97%AE%E9%A2%986.png"></p><p>上网查了一下，是github的问题，时墙时不墙。没有什么特别好的方法。所以暂时也只能把图片都同步到vercel了。</p><p><strong>已解决！</strong></p><p>还是<code>master</code>的问题。将自定义域名改为<code>https://cdn.jsdelivr.net/gh/zerohk/blogpic@main</code>的形式即可</p><p><img src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@main/%E5%85%B3%E4%BA%8Egithub%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA%E9%97%AE%E9%A2%987.png"></p><p>相册区能正确显示，浏览器也能正确显示。</p><p><img src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@main/%E5%85%B3%E4%BA%8Egithub%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA%E9%97%AE%E9%A2%988.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zerohk/blogpic@main/%E5%85%B3%E4%BA%8Egithub%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA%E9%97%AE%E9%A2%989.png"></p><p>但是github还是时好时坏，无法解决。</p><hr><p>10-12再次更新。</p><p>发现有时候不是网络原因，可能是账号原因，换个账号，换个token又能继续上传了。总之，还是不要滥用为好，毕竟是白嫖。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> 图床 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>发布文章指南</title>
      <link href="posts/1820155650/"/>
      <url>posts/1820155650/</url>
      
        <content type="html"><![CDATA[<h1 id="一、创建新的页面和文章"><a href="#一、创建新的页面和文章" class="headerlink" title="一、创建新的页面和文章"></a>一、创建新的页面和文章</h1><p>使用默认hexo命令即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建新页面</span></span><br><span class="line">hexo new page pagename </span><br><span class="line"><span class="meta">#</span><span class="bash"> 简化命令</span></span><br><span class="line">hexo n page pagename</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建新文章</span></span><br><span class="line">hexo new post postname</span><br><span class="line"><span class="meta">#</span><span class="bash"> 简化命令</span></span><br><span class="line">hexo n post postname</span><br></pre></td></tr></table></figure><p>由于butterfly主题的一些特性，所以更改了<code>./scaffolds</code>目录下的<code>page.md</code>和<code>post.md</code>，使得其在生成页面或文章的时候，会自动生成主题可能需要的<code>Front-matter</code></p><blockquote><p>Front-matter 是文档最上方以 — 分隔的区域，用于指定各种参数。</p></blockquote><p>下面分别是page页和post页的Front-matter的参数和各参数的用法。</p><h2 id="Page-Front-matter"><a href="#Page-Front-matter" class="headerlink" title="Page Front-matter"></a>Page Front-matter</h2><h3 id="参数列表"><a href="#参数列表" class="headerlink" title="参数列表"></a>参数列表</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">type:</span><br><span class="line">comments:</span><br><span class="line">description:</span><br><span class="line">keywords:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aside:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="参数用法"><a href="#参数用法" class="headerlink" title="参数用法"></a>参数用法</h3><table><thead><tr><th>参数</th><th>用途</th></tr></thead><tbody><tr><td>title</td><td>【必需】頁面標題</td></tr><tr><td>date</td><td>【必需】頁面創建日期</td></tr><tr><td>type</td><td>【必需】標籤、分類和友情鏈接三個頁面需要配置</td></tr><tr><td>updated</td><td>【可選】頁面更新日期</td></tr><tr><td>description</td><td>【可選】頁面描述</td></tr><tr><td>keywords</td><td>【可選】頁面關鍵字</td></tr><tr><td>comments</td><td>【可選】顯示頁面評論模塊(默認 true)</td></tr><tr><td>top_img</td><td>【可選】頁面頂部圖片，可输入url地址，也可以设置为false，不显示顶图</td></tr><tr><td>mathjax</td><td>【可選】顯示mathjax(當設置mathjax的per_page: false時，才需要配置，默認 false)（暂未安装）</td></tr><tr><td>katex</td><td>【可選】顯示katex(當設置katex的per_page: false時，才需要配置，默認 false)（暂未安装）</td></tr><tr><td>aside</td><td>【可選】顯示側邊欄 (默認 true)</td></tr><tr><td>aplayer</td><td>【可選】在需要的頁面加載aplayer的js和css（暂未配置）</td></tr><tr><td>highlight_shrink</td><td>【可選】配置代碼框是否展開(true/false)(默認為設置中highlight_shrink的配置)</td></tr></tbody></table><h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>如果没有特殊需求，除了必选项，其余各项缺省即可</p><h2 id="Post-Front-matter"><a href="#Post-Front-matter" class="headerlink" title="Post Front-matter"></a>Post Front-matter</h2><h3 id="参数列表-1"><a href="#参数列表-1" class="headerlink" title="参数列表"></a>参数列表</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">title: </span><br><span class="line">date: </span><br><span class="line">updated:</span><br><span class="line">sticky:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">password: </span><br><span class="line">abstract: </span><br><span class="line">message: .</span><br><span class="line">wrong<span class="emphasis">_pass_</span>message: </span><br><span class="line">wrong<span class="emphasis">_hash_</span>message: </span><br><span class="line">keywords:</span><br><span class="line">description:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">comments:</span></span><br><span class="line"><span class="emphasis">cover:</span></span><br><span class="line"><span class="emphasis">toc:</span></span><br><span class="line"><span class="emphasis">toc_</span>number:</span><br><span class="line">auto<span class="emphasis">_open:</span></span><br><span class="line"><span class="emphasis">copyright:</span></span><br><span class="line"><span class="emphasis">copyright_</span>author:</span><br><span class="line">copyright<span class="emphasis">_author_</span>href:</span><br><span class="line">copyright<span class="emphasis">_url:</span></span><br><span class="line"><span class="emphasis">copyright_</span>info:</span><br><span class="line">mathjax:</span><br><span class="line">katex:</span><br><span class="line">aplayer:</span><br><span class="line">highlight<span class="emphasis">_shrink:</span></span><br></pre></td></tr></table></figure><h3 id="参数用法-1"><a href="#参数用法-1" class="headerlink" title="参数用法"></a>参数用法</h3><h3 id=""><a href="#" class="headerlink" title=""></a></h3><table><thead><tr><th>参数</th><th>用途</th></tr></thead><tbody><tr><td>title</td><td>【必需】文章標題</td></tr><tr><td>date</td><td>【必需】文章創建日期</td></tr><tr><td>updated</td><td>【可選】文章更新日期</td></tr><tr><td>sticky</td><td>【可选】文章置顶，数字越大，优先级越高</td></tr><tr><td>tags</td><td>【可选】文章标签</td></tr><tr><td>categories</td><td>【可选】文章分类</td></tr><tr><td>password</td><td>【可选】给博客加密，在此处输入密码即可</td></tr><tr><td>abstract:</td><td>【可选】未知</td></tr><tr><td>message</td><td>【可選】加密文章提示</td></tr><tr><td>wrong_pass_message</td><td>【可选】加密文章密码错误提示</td></tr><tr><td>wrong_hash_message</td><td>【可选】未知</td></tr><tr><td>keywords</td><td>【可選】文章關鍵字</td></tr><tr><td>description</td><td>【可選】文章描述</td></tr><tr><td>comments</td><td>【可選】顯示文章評論模塊(默認 true)</td></tr><tr><td>top_img</td><td>【可選】文章頂部圖片</td></tr><tr><td>cover</td><td>【可选】文章縮略圖(如果沒有設置top_img,文章頁頂部將顯示縮略圖，可設為false/圖片地址/留空)</td></tr><tr><td>toc</td><td>【可選】顯示文章TOC(默認為設置中toc的enable配置)</td></tr><tr><td>toc_number</td><td>【可選】顯示toc_number(默認為設置中toc的number配置)</td></tr><tr><td>auto_open</td><td>【可選】是否自動打開TOC(默認為設置中toc的auto_open配置)</td></tr><tr><td>copyright</td><td>【可選】顯示文章版權模塊(默認為設置中post_copyright的enable配置)</td></tr><tr><td>copyright_author</td><td>【可選】文章版權模塊的<strong>文章作者</strong></td></tr><tr><td>copyright_author_href</td><td>【可選】文章版權模塊的<strong>文章作者</strong>鏈接</td></tr><tr><td>copyright_url</td><td>【可選】文章版權模塊的<strong>文章連結</strong>鏈接</td></tr><tr><td>copyright_info</td><td>【可選】文章版權模塊的<strong>版權聲明</strong>文字</td></tr><tr><td>mathjax</td><td>【可選】顯示mathjax(當設置mathjax的per_page: false時，才需要配置，默認 false)（暂未安装）</td></tr><tr><td>katex</td><td>【可選】顯示katex(當設置katex的per_page: false時，才需要配置，默認 false)（暂未安装）</td></tr><tr><td>aplayer</td><td>【可選】在需要的頁面加載aplayer的js和css（暂未配置）</td></tr><tr><td>highlight_shrink</td><td>【可選】配置代碼框是否展開(true/false)(默認為設置中highlight_shrink的配置)</td></tr></tbody></table><h3 id="备注-1"><a href="#备注-1" class="headerlink" title="备注"></a>备注</h3><p>如果没有特殊需求，除了必选项，其余各项缺省即可。</p><h1 id="二、更新站点"><a href="#二、更新站点" class="headerlink" title="二、更新站点"></a>二、更新站点</h1><p>由于安装了<code>hexo-douban</code>和<code>hexo-calendar</code>两个插件，和默认命令有冲突，所以文章写好后，不能使用简化命令直接对站点进行更新，需要采用以下命令。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">清空缓存，删除pulic目录</span></span><br><span class="line">hexo clean </span><br><span class="line"><span class="meta">#</span><span class="bash"> 生成静态文件，生成public目录</span></span><br><span class="line">hexo generate</span><br><span class="line"><span class="meta">#</span><span class="bash"> 不可直接用hexo g来生成静态文件，但可以使用以下简化命令</span></span><br><span class="line">hexo ge</span><br><span class="line"><span class="meta">#</span><span class="bash"> 部署网站</span></span><br><span class="line">hexo deploy</span><br><span class="line"><span class="meta">#</span><span class="bash"> 不可直接用hexo d来部署，但可以使用一下简化命令</span></span><br><span class="line">hexo de</span><br></pre></td></tr></table></figure><p>可选命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Usage: hexo generate</span><br><span class="line">Description:</span><br><span class="line">Generate static files.</span><br><span class="line">Options:</span><br><span class="line">  -b, --bail         Raise an error if any unhandled exception is thrown during generation</span><br><span class="line">  -c, --concurrency  Maximum number of files to be generated in parallel. Default is infinity</span><br><span class="line">  -d, --deploy       Deploy after generated,生成后直接部署</span><br><span class="line">  -f, --force        Force regenerate</span><br><span class="line">  -w, --watch        Watch file changes，只生成发生改变的页面</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在执行hexo generate之后，可以使用该命令更新豆瓣数据，默认会生成books,game,movies页面</span></span><br><span class="line">hexo douban</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">########</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">Usage: hexo douban</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Description:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Generate pages from douban</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Options:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  -b, --books   Generate douban books only</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  -g, --games   Generate douban games only</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  -m, --movies  Generate douban movies only</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">  #</span><span class="bash"><span class="comment">########因为只有books和movies进行了标记只需要执行以下命令即可</span></span></span><br><span class="line">  hexo douban -bm</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在执行hexo generate之后，可以使用该命令更新关于页面网站活动数据</span></span><br><span class="line">hexo gc -w=40</span><br><span class="line"><span class="meta">#</span><span class="bash">Usage: hexo gc</span></span><br><span class="line"><span class="meta">#</span><span class="bash">Generate calendar.json</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> hexo </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
